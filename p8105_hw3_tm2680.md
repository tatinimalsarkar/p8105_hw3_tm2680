p8105\_hw3\_tm2680
================
Tatini Mal-Sarkar
10/4/2018

Problem 1
=========

``` r
library(p8105.datasets)
brfss_data = brfss_smart2010 %>% 
  janitor::clean_names() %>% 
  filter(topic == "Overall Health") %>% 
  select(-class, -topic, -question, -data_value_footnote_symbol:-respid) %>% 
  mutate(response = factor(response, levels = c("Excellent", "Very good", "Good", "Fair", "Poor"))) 
```

``` r
brfss_data %>% 
  filter(year == 2002) %>% 
  group_by(locationabbr) %>% 
  summarize(n = n_distinct(geo_location)) %>% 
  filter(n >= 7)
```

    ## # A tibble: 6 x 2
    ##   locationabbr     n
    ##   <chr>        <int>
    ## 1 CT               7
    ## 2 FL               7
    ## 3 MA               8
    ## 4 NC               7
    ## 5 NJ               8
    ## 6 PA              10

In 2002, Connecticut, Florida, Massachusetts, North Carolina, New Jersey, and Pennsylvania were all observed at 7 distinct locations.

``` r
brfss_data %>% 
  group_by(locationabbr, year) %>% 
  summarize(n_obs = n()) %>% 
  ggplot(aes(x = year, y = n_obs, color = locationabbr)) + 
  geom_line() + 
  theme(legend.position = "bottom")
```

![](p8105_hw3_tm2680_files/figure-markdown_github/brfss_spag_plot-1.png)

Here is my spaghetti plot. The colors correspond to state, and the data is from 2002 to 2010.

``` r
brfss_data %>% 
  filter(locationabbr == "NY") %>% 
  group_by(locationdesc) %>% 
  spread(response, data_value) %>% 
  janitor::clean_names() %>% 
  filter(year == 2002 | year == 2006 | year == 2010) %>% 
  summarize(mean_exc = mean(excellent, na.rm = TRUE),
            sd_exc = sd(excellent, na.rm = TRUE)) 
```

    ## # A tibble: 9 x 3
    ##   locationdesc            mean_exc sd_exc
    ##   <chr>                      <dbl>  <dbl>
    ## 1 NY - Bronx County           17.6 NA    
    ## 2 NY - Erie County            17.2 NA    
    ## 3 NY - Kings County           20.4  1.77 
    ## 4 NY - Monroe County          22.4 NA    
    ## 5 NY - Nassau County          24.9  2.82 
    ## 6 NY - New York County        27.5  1.54 
    ## 7 NY - Queens County          19.6  1.36 
    ## 8 NY - Suffolk County         24.1  3.28 
    ## 9 NY - Westchester County     26.4  0.636

This is my table that shows the mean and standard deviation for the proportion of "Excellent" responses across counties in New York. NA standard deviations mean that there was only 1 observation for that county.

``` r
brfss_data 
```

    ## # A tibble: 10,625 x 12
    ##     year locationabbr locationdesc response sample_size data_value
    ##    <int> <chr>        <chr>        <fct>          <int>      <dbl>
    ##  1  2010 AL           AL - Jeffer… Excelle…          94       18.9
    ##  2  2010 AL           AL - Jeffer… Very go…         148       30  
    ##  3  2010 AL           AL - Jeffer… Good             208       33.1
    ##  4  2010 AL           AL - Jeffer… Fair             107       12.5
    ##  5  2010 AL           AL - Jeffer… Poor              45        5.5
    ##  6  2010 AL           AL - Mobile… Excelle…          91       15.6
    ##  7  2010 AL           AL - Mobile… Very go…         177       31.3
    ##  8  2010 AL           AL - Mobile… Good             224       31.2
    ##  9  2010 AL           AL - Mobile… Fair             120       15.5
    ## 10  2010 AL           AL - Mobile… Poor              66        6.4
    ## # ... with 10,615 more rows, and 6 more variables:
    ## #   confidence_limit_low <dbl>, confidence_limit_high <dbl>,
    ## #   display_order <int>, data_value_unit <chr>, data_value_type <chr>,
    ## #   geo_location <chr>
